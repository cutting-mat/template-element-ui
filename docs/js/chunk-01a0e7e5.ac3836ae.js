(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01a0e7e5","chunk-6a2e86ca"],{"38c0":function(e,t,r){"use strict";r.r(t),r.d(t,"list",function(){return a}),r.d(t,"add",function(){return s}),r.d(t,"edit",function(){return i}),r.d(t,"remove",function(){return c});var n=r("d722"),a=function(e){return n["a"].get("/menus",{params:e})},s=function(e){return n["a"].post("/menu",e)},i=function(e){return n["a"].put("/menu",e)},c=function(e){return n["a"].delete("/menu",{params:e})}},"3af3":function(e,t,r){"use strict";r.r(t),r.d(t,"list",function(){return a}),r.d(t,"add",function(){return s}),r.d(t,"edit",function(){return i}),r.d(t,"remove",function(){return c});var n=r("d722"),a=function(e){return n["a"].get("/resources",{params:e})},s=function(e){return n["a"].post("/resource",e)},i=function(e){return n["a"].put("/resource",e)},c=function(e){return n["a"].delete("/resource",{params:e})}},"847b":function(e,t,r){},"9b7b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tree",{ref:"tree",staticClass:"custom-tree",attrs:{data:e.list,props:e.defaultProps,"node-key":"id","default-expand-all":"","show-checkbox":e.picker,"check-strictly":e.picker},on:{"check-change":e.handleCheckChange},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return r("div",{staticClass:"custom-tree-item"},[r("div",{staticClass:"flex-1 extendLable"},[n.url?r("span",{staticStyle:{color:"#67c23a"}},[r("i",{staticClass:"el-icon-medal"})]):e._e(),r("span",{class:{source:!!n.url},staticStyle:{"margin-right":"20px"}},[e._v(e._s(n.name))]),n.url?r("el-tag",{attrs:{size:"mini",type:e.typeColor[n.method]}},[r("i",{staticClass:"el-icon-position"}),e._v(" "+e._s(n.method.toUpperCase()))]):e._e(),r("el-tag",{attrs:{size:"mini",type:"info"}},[r("i",{staticClass:"el-icon-link"}),e._v(" "+e._s(n.route||n.url))])],1),e.picker?e._e():r("span",{staticClass:"extendGroup"},[r("el-button",{directives:[{name:"has",rawName:"v-has",value:e.resource.edit,expression:"resource.edit"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("edit",n)}}},[e._v("编辑")]),n.route?r("el-button",{directives:[{name:"has",rawName:"v-has",value:e.resource.add,expression:"resource.add"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("append",n)}}},[e._v("添加子菜单")]):e._e(),n.route?r("el-button",{directives:[{name:"has",rawName:"v-has",value:e.resource.add,expression:"resource.add"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("addResource",n)}}},[e._v("添加资源")]):e._e(),r("el-button",{directives:[{name:"has",rawName:"v-has",value:e.resource.remove,expression:"resource.remove"}],attrs:{size:"small",type:"text"},on:{click:function(t){return t.stopPropagation(),e.$emit("remove",n)}}},[e._v("删除")])],1)])}}])})},a=[],s=(r("ac6a"),r("df73")),i=r("9f03"),c=r("3af3"),o=r("38c0"),u=r("c0d6"),d={props:{picker:{type:Boolean,required:!1,default:!1},checked:{type:Array,required:!1},listdata:{type:Array,required:!1}},data:function(){return{resource:c,menu:o,list:[],defaultProps:{children:"children",label:"title"},typeColor:{get:"success",post:"primary",put:"warning",delete:"danger"}}},watch:{listdata:{handler:function(e){Array.isArray(e)&&(this.list=e)},immediate:!0},checked:function(e){Array.isArray(e)&&this.$refs.tree.setCheckedKeys(e)}},methods:{handleCheckChange:function(e,t){var r=this;Array.isArray(e.children)&&e.children.length&&e.children.forEach(function(e){r.$refs.tree.setChecked(e,t)}),this.$nextTick(function(){var e=r.$refs.tree.getCheckedNodes();r.$emit("checkResource",e.filter(function(e){return!!e.url}).map(function(e){return e.id})),r.$emit("checkMenu",e.filter(function(e){return!!e.route}).map(function(e){return e.id}))})},fetchData:function(){var e=this;i["d"]().then(function(t){var r=t.data.data;u["a"].set("permission",r),e.list=s["a"](r.menus.concat(r.resources)),Array.isArray(e.checked)&&e.$nextTick(function(){e.$refs.tree.setCheckedKeys(e.checked)})})}},created:function(){this.listdata||this.fetchData()}},l=d,f=(r("bb4f"),r("2877")),p=Object(f["a"])(l,n,a,!1,null,"55bb299a",null);t["default"]=p.exports},bb4f:function(e,t,r){"use strict";var n=r("847b"),a=r.n(n);a.a}}]);