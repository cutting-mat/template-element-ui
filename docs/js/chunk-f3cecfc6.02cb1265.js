(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3cecfc6"],{3247:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"scrollbar blockLayout"},[r("div",{staticClass:"flex-row align-center"},[r("el-form",{ref:"searchForm",staticClass:"flex-1",attrs:{inline:"",size:"small",model:e.queryParam}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.theCURD.search()}}},[e._v("搜索")]),r("el-button",{on:{click:function(t){e.$refs.searchForm.resetFields(),e.$refs.theCURD.search()}}},[e._v("重置")])],1)],1),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.$refs.theCURD.create()}}},[e._v("添加")])],1),r("BaseCURD",{ref:"theCURD",attrs:{api:e.apiObj,model:e.model,columns:e.columns,queryParam:e.queryParam,getItemFromDetaiApi:""},on:{"loading-state":e.handleLoading},scopedSlots:e._u([{key:"status",fn:function(t){return[t.row.state?r("span",{staticStyle:{color:"#13ce66"}},[e._v("已启用")]):r("span",{staticStyle:{color:"#ff4949"}},[e._v("已禁用")])]}},{key:"action",fn:function(t){return[r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.apiObj.update,expression:"apiObj.update"}],attrs:{size:"mini"},on:{click:function(r){return e.$refs.theCURD.update(t.row)}}},[e._v(" 编辑 ")]),r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.apiObj.resetPassword,expression:"apiObj.resetPassword"}],attrs:{size:"mini",type:"warning"},on:{click:function(r){return e.resetPassword(t.row)}}},[e._v(" 重置密码 ")]),r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:e.apiObj.delete,expression:"apiObj.delete"}],attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.$refs.theCURD.delete(t.row)}}},[e._v(" 删除 ")])]}}])})],1)},a=[],o=r("cbfe"),i=r("ff47"),c={data:function(){var e=this,t=function(t,r,n){r?(r&&t.checkPass&&e.$refs.theCURD.form.validateField("checkPass"),n()):n(new Error("请输入密码"))},r=function(e,t,r){t?t!==e.password?r(new Error("两次输入密码不一致!")):r():r(new Error("请再次输入密码"))};return{apiObj:{list:o["list"],detail:o["detail"],create:o["add"],update:o["edit"],delete:o["remove"],resetPassword:o["resetPassword"]},loading:!1,model:{accountName:{label:"用户名",required:!0},accountNumber:{label:"账号",required:!0},password:{label:"密码",required:!0,scope:"create",validator:t},checkPass:{label:"确认密码",required:!0,scope:"create",validator:r},orgId:{type:"number",label:"所属组织",required:!0,control:"OrgPicker",controlOption:{adapter:function(t,r){return r&&r.id?r.fullName:e.$refs.theCURD.editForm.sysOrg?e.$refs.theCURD.editForm.sysOrg.fullName:t}},asynValid:!0},roleId:{type:"number",label:"角色",required:!0,control:"DictSelect",controlOption:{load:this.loadRole,labelKey:"name"}},state:{type:"number",default:1,label:"状态",required:!0,control:"el-switch",controlOption:{"active-text":"启用","inactive-text":"禁用","active-value":1,"inactive-value":0}}},columns:[{label:"账号",prop:"accountNumber",width:150},{label:"用户名",prop:"accountName",width:150},{label:"角色",formatter:function(e){return e.roleName?"".concat(e.belongOrgName," - ").concat(e.roleName):"无"}},{label:"状态",width:80,slotName:"status"},{label:"操作",width:260,slotName:"action"}],queryParam:{name:""}}},methods:{handleLoading:function(e){console.log(e),this.loading=e},resetPassword:function(e){var t=this;if(!e)return null;this.$confirm("确定重置账号 ".concat(e.accountNumber," 的密码?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.loading=!0,o["resetPassword"]({id:e.id}).then((function(){t.fetchData(),t.$alert("密码已重置！",{confirmButtonText:"我知道了"})})).catch((function(){t.loading=!1}))})).catch((function(){}))},loadRole:function(){return Object(i["list"])().then((function(e){return e.data.data}))}}},u=c,l=r("2877"),s=Object(l["a"])(u,n,a,!1,null,"fe80f6cc",null);t["default"]=s.exports},cbfe:function(e,t,r){"use strict";r.r(t),r.d(t,"list",(function(){return a})),r.d(t,"detail",(function(){return o})),r.d(t,"add",(function(){return i})),r.d(t,"edit",(function(){return c})),r.d(t,"remove",(function(){return u})),r.d(t,"resetPassword",(function(){return l}));var n=r("4c82"),a=function(e){return n["a"].get("/account/s",{params:e})},o=function(e){return n["a"].get("/account",{params:e})},i=function(e){return n["a"].post("/account",e)},c=function(e){return n["a"].put("/account",e)},u=function(e){return n["a"].delete("/account",{params:e})},l=function(e){return n["a"].put("/account/reset",e)}},ff47:function(e,t,r){"use strict";r.r(t),r.d(t,"list",(function(){return a})),r.d(t,"detail",(function(){return o})),r.d(t,"add",(function(){return i})),r.d(t,"edit",(function(){return c})),r.d(t,"remove",(function(){return u}));var n=r("4c82"),a=function(e){return n["a"].get("/role/s",{params:e})},o=function(e){return n["a"].get("/role",{params:e})},i=function(e){return n["a"].post("/role",e)},c=function(e){return n["a"].put("/role",e)},u=function(e){return n["a"].delete("/role",{params:e})}}}]);